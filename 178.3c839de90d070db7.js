"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[178],{3178:(I,h,o)=>{o.r(h),o.d(h,{PlayerModule:()=>rt,playerRouting:()=>C});var y=o(9808),i=o(3075),x=o(3844),t=o(5e3),g=o(325),v=o(6581),m=o(2081),p=o(7322),Z=o(7531),u=o(7423),T=o(5245),r=o(2494),d=o(773);function U(e,s){if(1&e&&(t.TgZ(0,"fuse-alert",34),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",a.alert.type)("@shake","error"===a.alert.type),t.xp6(1),t.hij(" ",a.alert.message," ")}}function N(e,s){1&e&&t._uU(0,"Update your Nickname")}function w(e,s){1&e&&(t.TgZ(0,"span",35),t._uU(1,"Next"),t.qZA())}function b(e,s){1&e&&t._uU(0,"Create your Password")}function F(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function J(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function _(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function G(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function W(e,s){1&e&&(t.TgZ(0,"span",35),t._uU(1,"Next"),t.qZA())}function Q(e,s){1&e&&t._uU(0,"Done")}function S(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",36),t._uU(2,"You are all set "),t.TgZ(3,"span",4),t._uU(4),t.qZA(),t._uU(5,"!"),t.qZA(),t.TgZ(6,"span",37),t._uU(7,"You can still review your changes before you submit by clicking the "),t.TgZ(8,"strong",38),t._uU(9,"Back"),t.qZA(),t._uU(10," button, or if you are sure about it, you can hit "),t.TgZ(11,"strong",39),t._uU(12,"Submit"),t.qZA(),t._uU(13,"."),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(4),t.Oqu(a.firstFormGroup.get("nickName").value)}}function E(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",36),t._uU(2,"Hang on there "),t.TgZ(3,"span",4),t._uU(4),t.qZA(),t._uU(5,"."),t.qZA(),t.TgZ(6,"span",37),t._uU(7,"Please wait while we submit your changes."),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(4),t.Oqu(a.firstFormGroup.get("nickName").value)}}function M(e,s){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",35),t._uU(2,"Submit"),t.qZA(),t.TgZ(3,"span",20),t._uU(4,"Submit"),t.qZA(),t.qZA())}function k(e,s){1&e&&t._UZ(0,"mat-progress-spinner",40),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}let D=(()=>{class e{constructor(a,n,l){this._activatedRoute=a,this._playerService=n,this._formBuilder=l,this.alert={type:"success",message:""},this.showAlert=!1,this.isLinear=!1,this.isSubmitting=!1}ngOnInit(){var a;this._activatedRoute.data.subscribe(n=>{var l,c;this._playerService.playerInfo=null===(l=null==n?void 0:n.PlayerData)||void 0===l?void 0:l.userInfo,this.playerData=null===(c=null==n?void 0:n.PlayerData)||void 0===c?void 0:c.userInfo}),this.firstFormGroup=this._formBuilder.group({nickName:[null===(a=this.playerData)||void 0===a?void 0:a.nickName,i.kI.compose([i.kI.required,i.kI.minLength(3),i.kI.maxLength(10)])]}),this.secondFormGroup=this._formBuilder.group({password:["",i.kI.compose([i.kI.required,i.kI.minLength(4)])],confirmPassword:["",i.kI.compose([i.kI.required,i.kI.minLength(4)])]}),this.secondFormGroup.get("password").valueChanges.subscribe(n=>{this.passwordChange()}),this.secondFormGroup.get("confirmPassword").valueChanges.subscribe(n=>{this.passwordChange()})}passwordChange(){var a=this.secondFormGroup.get("password").value,n=this.secondFormGroup.get("confirmPassword").value;this.secondFormGroup.controls.confirmPassword.setErrors(a!=n?{invalid:!0}:null)}submitSetup(){this.isSubmitting=!0,this.firstFormGroup.disable(),this.secondFormGroup.disable()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(g.gz),t.Y36(v.l),t.Y36(i.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-welcome-player"]],decls:74,vars:27,consts:[[1,"flex","flex-col","items-center","justify-center","flex-auto","min-w-0"],[1,"flex","items-center","justify-end","w-full","sm:w-auto","py-4","px-4","p-4","rounded-2xl","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","p-2","sm:mx-0","h-150","max-h-150","max-w-120","w-100"],[1,"flex","flex-row","flex-auto","space-x-1","items-center","justify-center","mt-6","text-2xl","font-semibold","tracking-tight","leading-tight"],[1,"font-extrabold"],[1,"flex","flex-col","items-center","justify-center","mt-2","font-medium"],[1,"text-center"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"w-full","h-150","max-h-150"],["orientation","vertical",1,"w-full","bg-transparent",3,"linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"w-full"],["matInput","","placeholder","Nickname","formControlName","nickName","required",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-row","items-end","justify-end"],["mat-flat-button","","matStepperNext","",3,"color","disabled"],["class","absolute inline-flex animate-ping text-white",4,"ngIf"],[1,"relative","inline-flex","text-white"],["matInput","","formControlName","password","type","password","placeholder","Password","required",""],["pinField",""],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm your Password","required",""],["confirmPinField",""],["mat-button","","matStepperPrevious","",3,"color"],[1,"w-full"],[1,"relative","flex","flex-col","left-0","z-49","mt-2"],[4,"ngIf"],[1,"flex","flex-row","items-end","justify-end","mt-4"],["mat-button","","matStepperPrevious","",3,"color","disabled"],["mat-flat-button","",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"absolute","inline-flex","animate-ping","text-white"],[1,"text-start","font-semibold","text-lg"],[1,"text-start","font-medium","text-md","mt-2","break-words","whitespace-pre-line"],[1,"text-red-400","text-md"],[1,"text-blue-400","text-md"],[3,"diameter","mode"]],template:function(a,n){if(1&a){const l=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"span"),t._uU(5,"Greetings "),t.TgZ(6,"span",4),t._uU(7),t.qZA(),t._uU(8,"!"),t.qZA(),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t._uU(11,"Please fill the following forms to complete your account registration."),t.qZA(),t.qZA(),t.YNc(12,U,2,5,"fuse-alert",7),t.TgZ(13,"div",8),t.TgZ(14,"mat-stepper",9),t.TgZ(15,"mat-step",10),t.TgZ(16,"form",11),t.YNc(17,N,1,0,"ng-template",12),t.TgZ(18,"mat-form-field",13),t.TgZ(19,"mat-label"),t._uU(20,"Nickname"),t.qZA(),t._UZ(21,"input",14),t.TgZ(22,"button",15),t.NdJ("click",function(){return n.firstFormGroup.get("nickName").setValue("")}),t._UZ(23,"mat-icon",16),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25," Nickname should be 3 to 10 characters long. "),t.qZA(),t.qZA(),t.TgZ(26,"div",17),t.TgZ(27,"button",18),t.TgZ(28,"div"),t.YNc(29,w,2,0,"span",19),t.TgZ(30,"span",20),t._uU(31,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"mat-step",10),t.TgZ(33,"form",11),t.YNc(34,b,1,0,"ng-template",12),t.TgZ(35,"mat-form-field",13),t.TgZ(36,"mat-label"),t._uU(37,"Password"),t.qZA(),t._UZ(38,"input",21,22),t.TgZ(40,"button",15),t.NdJ("click",function(){t.CHM(l);const f=t.MAs(39);return f.type="password"===f.type?"text":"password"}),t.YNc(41,F,1,1,"mat-icon",23),t.YNc(42,J,1,1,"mat-icon",23),t.qZA(),t.TgZ(43,"mat-error"),t._uU(44," Password must be at least 4 characters. "),t.qZA(),t.qZA(),t.TgZ(45,"mat-form-field",13),t.TgZ(46,"mat-label"),t._uU(47,"Re-enter your Password"),t.qZA(),t._UZ(48,"input",24,25),t.TgZ(50,"button",15),t.NdJ("click",function(){t.CHM(l);const f=t.MAs(49);return f.type="password"===f.type?"text":"password"}),t.YNc(51,_,1,1,"mat-icon",23),t.YNc(52,G,1,1,"mat-icon",23),t.qZA(),t.TgZ(53,"mat-error"),t._uU(54," Passwords do not match. "),t.qZA(),t.qZA(),t.TgZ(55,"div",17),t.TgZ(56,"button",26),t._uU(57,"Back"),t.qZA(),t.TgZ(58,"button",18),t.TgZ(59,"div"),t.YNc(60,W,2,0,"span",19),t.TgZ(61,"span",20),t._uU(62,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"mat-step",27),t.YNc(64,Q,1,0,"ng-template",12),t.TgZ(65,"div",28),t.YNc(66,S,14,1,"ng-container",29),t.YNc(67,E,8,1,"ng-container",29),t.qZA(),t.TgZ(68,"div",30),t.TgZ(69,"button",31),t._uU(70,"Back"),t.qZA(),t.TgZ(71,"button",32),t.NdJ("click",function(){return n.submitSetup()}),t.YNc(72,M,5,0,"div",29),t.YNc(73,k,1,2,"mat-progress-spinner",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const l=t.MAs(39),c=t.MAs(49);t.xp6(7),t.Oqu(n.playerData.nickName),t.xp6(5),t.Q6J("ngIf",n.showAlert),t.xp6(2),t.Q6J("linear",!0),t.xp6(1),t.Q6J("stepControl",n.firstFormGroup),t.xp6(1),t.Q6J("formGroup",n.firstFormGroup),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:x-circle"),t.xp6(4),t.Q6J("color","primary")("disabled",!n.firstFormGroup.get("nickName").valid),t.xp6(2),t.Q6J("ngIf",n.firstFormGroup.get("nickName").valid),t.xp6(3),t.Q6J("stepControl",n.secondFormGroup),t.xp6(1),t.Q6J("formGroup",n.secondFormGroup),t.xp6(8),t.Q6J("ngIf","password"===l.type),t.xp6(1),t.Q6J("ngIf","text"===l.type),t.xp6(9),t.Q6J("ngIf","password"===c.type),t.xp6(1),t.Q6J("ngIf","text"===c.type),t.xp6(4),t.Q6J("color","warn"),t.xp6(2),t.Q6J("color","primary")("disabled",!n.secondFormGroup.get("password").valid||!n.secondFormGroup.get("confirmPassword").valid),t.xp6(2),t.Q6J("ngIf",n.secondFormGroup.get("password").valid&&n.secondFormGroup.get("confirmPassword").valid),t.xp6(6),t.Q6J("ngIf",!n.isSubmitting),t.xp6(1),t.Q6J("ngIf",n.isSubmitting),t.xp6(2),t.Q6J("color","warn")("disabled",n.isSubmitting),t.xp6(2),t.Q6J("color","primary")("disabled",n.isSubmitting),t.xp6(1),t.Q6J("ngIf",!n.isSubmitting),t.xp6(1),t.Q6J("ngIf",n.isSubmitting)}},directives:[y.O5,m.Vq,m.C0,i._Y,i.JL,i.sg,m.VY,p.KE,p.hX,Z.Nt,i.Fj,i.JJ,i.u,i.Q7,u.lW,p.R9,T.Hw,p.TO,m.Ic,m.fd,r.W,d.Ou],encapsulation:2,data:{animation:x.b}}),e})();var O=o(7021),P=o(1086),Y=o(7545);let A=(()=>{class e{constructor(a,n){this._playerService=a,this._router=n}_check(){return this._playerService.check().pipe((0,Y.w)(a=>a?(0,P.of)(!0):(this._router.navigate(["sign-in"]),(0,P.of)(!1))))}canActivate(a,n){return this._check()}canActivateChild(a,n){return this._check()}canLoad(a,n){return this._check()}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(v.l),t.LFG(g.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=o(2340),L=o(567),B=o(4850),R=o(520);let j=(()=>{class e{constructor(a){this._httpClient=a,this.apiHost=q.N.apiHost}resolve(a,n){return(0,L.D)([this._httpClient.get(`${this.apiHost}api/player`)]).pipe((0,B.U)(([l])=>({userInfo:l})))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(R.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=o(7775),K=o(1079),z=o(9832),$=o(2140),V=o(8966),X=o(4834),tt=o(2181),et=o(5899),ot=o(2368),nt=o(7261),at=o(4466);const C=[{path:"",component:O.$,data:{layout:"empty"},children:[{path:"",loadChildren:()=>o.e(770).then(o.bind(o,8770)).then(e=>e.PlayerLandingModule)}]},{path:"",canActivate:[A],canActivateChild:[A],data:{layout:"empty"},children:[{path:"setup",data:{layout:"centered"},resolve:{PlayerData:j},component:D}]}];let rt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[y.ez,g.Bz.forChild(C),u.ot,z.vV,X.t,T.Ps,tt.Tx,et.Cv,at.m,p.lN,V.Is,Z.c,ot.rP,$.Hi,K.Bb,d.Cq,nt.ZX,H.fC,m.T5]]}),e})()},6581:(I,h,o)=>{o.d(h,{l:()=>Z});var y=o(2340),i=o(591),x=o(1737),t=o(1086),g=o(7221),v=o(7545),m=o(5e3),p=o(520);let Z=(()=>{class u{constructor(r){this._httpClient=r,this.apiHost=y.N.apiHost,this._authenticated=!1,this._playerInfo=new i.X(null)}set accessToken(r){sessionStorage.removeItem("access_token"),sessionStorage.setItem("access_token",r)}get accessToken(){var r;return null!==(r=sessionStorage.getItem("access_token"))&&void 0!==r?r:""}get playerInfo$(){return this._playerInfo.asObservable()}set playerInfo(r){this._playerInfo.next(r)}verifyUserLanding(r){return this._httpClient.post(`${this.apiHost}api/player/setup`,r).pipe((0,g.K)(d=>(0,x._)(d)),(0,v.w)(d=>(this.accessToken=d.token,this._authenticated=!0,(0,t.of)(d))))}validateToken(){return this._httpClient.post(`${this.apiHost}api/player/validate-token`,{}).pipe((0,g.K)(()=>(0,t.of)(!1)),(0,v.w)(r=>(this._authenticated=null==r?void 0:r.valid,(0,t.of)(null==r?void 0:r.valid))))}check(){let r=(0,t.of)(!1);return this._authenticated&&(r=(0,t.of)(!0)),r=this.accessToken?this.validateToken():(0,t.of)(!1),r}}return u.\u0275fac=function(r){return new(r||u)(m.LFG(p.eN))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);