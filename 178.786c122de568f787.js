"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[178],{3178:(U,h,o)=>{o.r(h),o.d(h,{PlayerModule:()=>nt,playerRouting:()=>I});var y=o(9808),i=o(3075),x=o(3844),t=o(5e3),g=o(325),v=o(6581),m=o(2081),p=o(7322),Z=o(7531),u=o(7423),T=o(5245),r=o(2494),d=o(773);function N(e,s){if(1&e&&(t.TgZ(0,"fuse-alert",34),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",n.alert.type)("@shake","error"===n.alert.type),t.xp6(1),t.hij(" ",n.alert.message," ")}}function w(e,s){1&e&&t._uU(0,"Update your Nickname")}function J(e,s){1&e&&t._uU(0,"Create your Password")}function b(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function F(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function W(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function _(e,s){1&e&&t._UZ(0,"mat-icon",16),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function Q(e,s){1&e&&t._uU(0,"Done")}function S(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",35),t._uU(2,"You are all set "),t.TgZ(3,"span",4),t._uU(4),t.qZA(),t._uU(5,"!"),t.qZA(),t.TgZ(6,"span",36),t._uU(7,"You can still review your changes before you submit by clicking the "),t.TgZ(8,"strong",37),t._uU(9,"Back"),t.qZA(),t._uU(10," button, or if you are sure about it, you can hit "),t.TgZ(11,"strong",38),t._uU(12,"Submit"),t.qZA(),t._uU(13,"."),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.Oqu(n.firstFormGroup.get("nickName").value)}}function E(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",35),t._uU(2,"Hang on there "),t.TgZ(3,"span",4),t._uU(4),t.qZA(),t._uU(5,"."),t.qZA(),t.TgZ(6,"span",36),t._uU(7,"Please wait while we submit your changes."),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.Oqu(n.firstFormGroup.get("nickName").value)}}function M(e,s){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",19),t._uU(2,"Submit"),t.qZA(),t.TgZ(3,"span",20),t._uU(4,"Submit"),t.qZA(),t.qZA())}function G(e,s){1&e&&t._UZ(0,"mat-progress-spinner",39),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}let q=(()=>{class e{constructor(n,a,l){this._activatedRoute=n,this._playerService=a,this._formBuilder=l,this.alert={type:"success",message:""},this.showAlert=!1,this.isLinear=!1,this.isSubmitting=!1}ngOnInit(){var n;this._activatedRoute.data.subscribe(a=>{var l,c;this._playerService.playerInfo=null===(l=null==a?void 0:a.PlayerData)||void 0===l?void 0:l.userInfo,this.playerData=null===(c=null==a?void 0:a.PlayerData)||void 0===c?void 0:c.userInfo}),this.firstFormGroup=this._formBuilder.group({nickName:[null===(n=this.playerData)||void 0===n?void 0:n.nickName,i.kI.compose([i.kI.required,i.kI.maxLength(10)])]}),this.secondFormGroup=this._formBuilder.group({password:["",i.kI.compose([i.kI.required,i.kI.minLength(4)])],confirmPassword:["",i.kI.compose([i.kI.required,i.kI.minLength(4)])]}),this.secondFormGroup.get("password").valueChanges.subscribe(a=>{this.passwordChange()}),this.secondFormGroup.get("confirmPassword").valueChanges.subscribe(a=>{this.passwordChange()})}passwordChange(){var n=this.secondFormGroup.get("password").value,a=this.secondFormGroup.get("confirmPassword").value;this.secondFormGroup.controls.confirmPassword.setErrors(n!=a?{invalid:!0}:null)}submitSetup(){this.isSubmitting=!0,this.firstFormGroup.disable(),this.secondFormGroup.disable()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.gz),t.Y36(v.l),t.Y36(i.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-welcome-player"]],decls:76,vars:23,consts:[[1,"flex","flex-col","items-center","justify-center","flex-auto","min-w-0"],[1,"flex","items-center","justify-end","w-full","sm:w-auto","py-4","px-4","p-4","rounded-2xl","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","p-2","sm:mx-0","h-150","max-h-150","max-w-120","w-100"],[1,"flex","flex-row","flex-auto","space-x-1","items-center","justify-center","mt-6","text-2xl","font-semibold","tracking-tight","leading-tight"],[1,"font-extrabold"],[1,"flex","flex-col","items-center","justify-center","mt-2","font-medium"],[1,"text-center"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"w-full","h-150","max-h-150"],["orientation","vertical",1,"w-full","bg-transparent",3,"linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"w-full"],["matInput","","placeholder","Nickname","formControlName","nickName","required",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-row","items-end","justify-end"],["mat-flat-button","","matStepperNext","",3,"color"],[1,"absolute","inline-flex","animate-ping","text-white"],[1,"relative","inline-flex","text-white"],["matInput","","formControlName","password","type","password","placeholder","Password","required",""],["pinField",""],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm your Password","required",""],["confirmPinField",""],["mat-button","","matStepperPrevious","",3,"color"],[1,"w-full"],[1,"relative","flex","flex-col","-left-10","z-49","mt-2"],[4,"ngIf"],[1,"flex","flex-row","items-end","justify-end","mt-4"],["mat-button","","matStepperPrevious","",3,"color","disabled"],["mat-flat-button","",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"text-center","font-semibold","text-lg"],[1,"text-center","font-medium","text-md","mt-2","break-words","whitespace-pre-line"],[1,"text-red-400","text-md"],[1,"text-blue-400","text-md"],[3,"diameter","mode"]],template:function(n,a){if(1&n){const l=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"span"),t._uU(5,"Welcome "),t.TgZ(6,"span",4),t._uU(7),t.qZA(),t._uU(8,"!"),t.qZA(),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t._uU(11,"Please fill up the following forms to complete your account registration."),t.qZA(),t.qZA(),t.YNc(12,N,2,5,"fuse-alert",7),t.TgZ(13,"div",8),t.TgZ(14,"mat-stepper",9),t.TgZ(15,"mat-step",10),t.TgZ(16,"form",11),t.YNc(17,w,1,0,"ng-template",12),t.TgZ(18,"mat-form-field",13),t.TgZ(19,"mat-label"),t._uU(20,"Nickname"),t.qZA(),t._UZ(21,"input",14),t.TgZ(22,"button",15),t.NdJ("click",function(){return a.firstFormGroup.get("nickName").setValue("")}),t._UZ(23,"mat-icon",16),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25," Nickname is required and not more than 10 characters. "),t.qZA(),t.qZA(),t.TgZ(26,"div",17),t.TgZ(27,"button",18),t.TgZ(28,"div"),t.TgZ(29,"span",19),t._uU(30,"Next"),t.qZA(),t.TgZ(31,"span",20),t._uU(32,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"mat-step",10),t.TgZ(34,"form",11),t.YNc(35,J,1,0,"ng-template",12),t.TgZ(36,"mat-form-field",13),t.TgZ(37,"mat-label"),t._uU(38,"Password"),t.qZA(),t._UZ(39,"input",21,22),t.TgZ(41,"button",15),t.NdJ("click",function(){t.CHM(l);const f=t.MAs(40);return f.type="password"===f.type?"text":"password"}),t.YNc(42,b,1,1,"mat-icon",23),t.YNc(43,F,1,1,"mat-icon",23),t.qZA(),t.TgZ(44,"mat-error"),t._uU(45," Password must be at least 4 characters. "),t.qZA(),t.qZA(),t.TgZ(46,"mat-form-field",13),t.TgZ(47,"mat-label"),t._uU(48,"Re-enter your Password"),t.qZA(),t._UZ(49,"input",24,25),t.TgZ(51,"button",15),t.NdJ("click",function(){t.CHM(l);const f=t.MAs(50);return f.type="password"===f.type?"text":"password"}),t.YNc(52,W,1,1,"mat-icon",23),t.YNc(53,_,1,1,"mat-icon",23),t.qZA(),t.TgZ(54,"mat-error"),t._uU(55," Passwords do not match. "),t.qZA(),t.qZA(),t.TgZ(56,"div",17),t.TgZ(57,"button",26),t._uU(58,"Back"),t.qZA(),t.TgZ(59,"button",18),t.TgZ(60,"div"),t.TgZ(61,"span",19),t._uU(62,"Next"),t.qZA(),t.TgZ(63,"span",20),t._uU(64,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"mat-step",27),t.YNc(66,Q,1,0,"ng-template",12),t.TgZ(67,"div",28),t.YNc(68,S,14,1,"ng-container",29),t.YNc(69,E,8,1,"ng-container",29),t.qZA(),t.TgZ(70,"div",30),t.TgZ(71,"button",31),t._uU(72,"Back"),t.qZA(),t.TgZ(73,"button",32),t.NdJ("click",function(){return a.submitSetup()}),t.YNc(74,M,5,0,"div",29),t.YNc(75,G,1,2,"mat-progress-spinner",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const l=t.MAs(40),c=t.MAs(50);t.xp6(7),t.Oqu(a.playerData.nickName),t.xp6(5),t.Q6J("ngIf",a.showAlert),t.xp6(2),t.Q6J("linear",!0),t.xp6(1),t.Q6J("stepControl",a.firstFormGroup),t.xp6(1),t.Q6J("formGroup",a.firstFormGroup),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:x-circle"),t.xp6(4),t.Q6J("color","primary"),t.xp6(6),t.Q6J("stepControl",a.secondFormGroup),t.xp6(1),t.Q6J("formGroup",a.secondFormGroup),t.xp6(8),t.Q6J("ngIf","password"===l.type),t.xp6(1),t.Q6J("ngIf","text"===l.type),t.xp6(9),t.Q6J("ngIf","password"===c.type),t.xp6(1),t.Q6J("ngIf","text"===c.type),t.xp6(4),t.Q6J("color","warn"),t.xp6(2),t.Q6J("color","primary"),t.xp6(9),t.Q6J("ngIf",!a.isSubmitting),t.xp6(1),t.Q6J("ngIf",a.isSubmitting),t.xp6(2),t.Q6J("color","warn")("disabled",a.isSubmitting),t.xp6(2),t.Q6J("color","primary")("disabled",a.isSubmitting),t.xp6(1),t.Q6J("ngIf",!a.isSubmitting),t.xp6(1),t.Q6J("ngIf",a.isSubmitting)}},directives:[y.O5,m.Vq,m.C0,i._Y,i.JL,i.sg,m.VY,p.KE,p.hX,Z.Nt,i.Fj,i.JJ,i.u,i.Q7,u.lW,p.R9,T.Hw,p.TO,m.Ic,m.fd,r.W,d.Ou],encapsulation:2,data:{animation:x.b}}),e})();var P=o(7021),A=o(1086),D=o(7545);let C=(()=>{class e{constructor(n,a){this._playerService=n,this._router=a}_check(){return this._playerService.check().pipe((0,D.w)(n=>n?(0,A.of)(!0):(this._router.navigate(["sign-in"]),(0,A.of)(!1))))}canActivate(n,a){return this._check()}canActivateChild(n,a){return this._check()}canLoad(n,a){return this._check()}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(v.l),t.LFG(g.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=o(2340),k=o(567),Y=o(4850),L=o(520);let B=(()=>{class e{constructor(n){this._httpClient=n,this.apiHost=O.N.apiHost}resolve(n,a){return(0,k.D)([this._httpClient.get(`${this.apiHost}api/player`)]).pipe((0,Y.U)(([l])=>({userInfo:l})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(L.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=o(7775),j=o(1079),H=o(9832),K=o(2140),z=o(8966),$=o(4834),V=o(2181),X=o(5899),tt=o(2368),et=o(7261),ot=o(4466);const I=[{path:"",component:P.$,data:{layout:"empty"},children:[{path:"",loadChildren:()=>o.e(770).then(o.bind(o,8770)).then(e=>e.PlayerLandingModule)}]},{path:"",canActivate:[C],canActivateChild:[C],component:P.$,data:{layout:"empty"},children:[{path:"setup",resolve:{PlayerData:B},component:q}]}];let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[y.ez,g.Bz.forChild(I),u.ot,H.vV,$.t,T.Ps,V.Tx,X.Cv,ot.m,p.lN,z.Is,Z.c,tt.rP,K.Hi,j.Bb,d.Cq,et.ZX,R.fC,m.T5]]}),e})()},6581:(U,h,o)=>{o.d(h,{l:()=>Z});var y=o(2340),i=o(591),x=o(1737),t=o(1086),g=o(7221),v=o(7545),m=o(5e3),p=o(520);let Z=(()=>{class u{constructor(r){this._httpClient=r,this.apiHost=y.N.apiHost,this._authenticated=!1,this._playerInfo=new i.X(null)}set accessToken(r){sessionStorage.removeItem("access_token"),sessionStorage.setItem("access_token",r)}get accessToken(){var r;return null!==(r=sessionStorage.getItem("access_token"))&&void 0!==r?r:""}get playerInfo$(){return this._playerInfo.asObservable()}set playerInfo(r){this._playerInfo.next(r)}verifyUserLanding(r){return this._httpClient.post(`${this.apiHost}api/player/setup`,r).pipe((0,g.K)(d=>(0,x._)(d)),(0,v.w)(d=>(this.accessToken=d.token,this._authenticated=!0,(0,t.of)(d))))}validateToken(){return this._httpClient.post(`${this.apiHost}api/player/validate-token`,{}).pipe((0,g.K)(()=>(0,t.of)(!1)),(0,v.w)(r=>(this._authenticated=null==r?void 0:r.valid,(0,t.of)(null==r?void 0:r.valid))))}check(){let r=(0,t.of)(!1);return this._authenticated&&(r=(0,t.of)(!0)),r=this.accessToken?this.validateToken():(0,t.of)(!1),r}}return u.\u0275fac=function(r){return new(r||u)(m.LFG(p.eN))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);