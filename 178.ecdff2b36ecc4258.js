"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[178],{3178:(A,f,n)=>{n.r(f),n.d(f,{PlayerModule:()=>st,playerRouting:()=>P});var g=n(9808),l=n(3075),v=n(3844),t=n(5e3),p=n(325),d=n(6581),h=n(2494),y=n(5245),u=n(2081),c=n(7322),Z=n(7531),a=n(7423),m=n(773);function C(e,i){if(1&e&&(t.TgZ(0,"fuse-alert",6),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",o.alert.type)("@shake","error"===o.alert.type),t.xp6(1),t.hij(" ",o.alert.message," ")}}function I(e,i){if(1&e&&(t.TgZ(0,"div",7),t.TgZ(1,"div",8),t.TgZ(2,"span"),t._uU(3,"Congrats "),t.TgZ(4,"span",9),t._uU(5),t.qZA(),t._uU(6,"!"),t.qZA(),t.qZA(),t.TgZ(7,"span",10),t._uU(8,"We have successfully updated your account!"),t.qZA(),t._UZ(9,"mat-icon",11),t.TgZ(10,"span",12),t._uU(11,"You can close this now."),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(5),t.Oqu(o.playerData.nickName),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:badge-check")}}function w(e,i){1&e&&t._uU(0,"Update your Nickname")}function U(e,i){1&e&&(t.TgZ(0,"span",43),t._uU(1,"Next"),t.qZA())}function b(e,i){1&e&&t._uU(0,"Create your Password")}function N(e,i){1&e&&t._UZ(0,"mat-icon",24),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function F(e,i){1&e&&t._UZ(0,"mat-icon",24),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function J(e,i){1&e&&t._UZ(0,"mat-icon",24),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function G(e,i){1&e&&t._UZ(0,"mat-icon",24),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function S(e,i){1&e&&(t.TgZ(0,"span",43),t._uU(1,"Next"),t.qZA())}function W(e,i){1&e&&t._uU(0,"Done")}function q(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",44),t._uU(2,"You are all set "),t.TgZ(3,"span",9),t._uU(4),t.qZA(),t._uU(5,"!"),t.qZA(),t.TgZ(6,"span",45),t._uU(7,"You can still review your changes before you submit by clicking the "),t.TgZ(8,"strong",46),t._uU(9,"Back"),t.qZA(),t._uU(10," button, or if you are sure about it, you can hit "),t.TgZ(11,"strong",47),t._uU(12,"Submit"),t.qZA(),t._uU(13,"."),t.qZA(),t.BQk()),2&e){const o=t.oxw(2);t.xp6(4),t.Oqu(o.firstFormGroup.get("nickName").value)}}function Q(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",44),t._uU(2,"Hang on there "),t.TgZ(3,"span",9),t._uU(4),t.qZA(),t._uU(5,"."),t.qZA(),t.TgZ(6,"span",45),t._uU(7,"Please wait while we submit your changes."),t.qZA(),t.BQk()),2&e){const o=t.oxw(2);t.xp6(4),t.Oqu(o.firstFormGroup.get("nickName").value)}}function k(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",43),t._uU(2,"Submit"),t.qZA(),t.TgZ(3,"span",28),t._uU(4,"Submit"),t.qZA(),t.qZA())}function M(e,i){1&e&&t._UZ(0,"mat-progress-spinner",48),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}function E(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"div",8),t.TgZ(2,"span"),t._uU(3,"Greetings "),t.TgZ(4,"span",9),t._uU(5,"Player"),t.qZA(),t._uU(6,"!"),t.qZA(),t.qZA(),t.TgZ(7,"div",14),t.TgZ(8,"div",15),t._uU(9,"Please fill the following forms to complete your account registration."),t.qZA(),t.qZA(),t.TgZ(10,"mat-stepper",16),t.TgZ(11,"mat-step",17),t.TgZ(12,"form",18),t.YNc(13,w,1,0,"ng-template",19),t.TgZ(14,"span",20),t.TgZ(15,"strong"),t._uU(16,"Note:"),t.qZA(),t._uU(17," For your security and privacy, you will be addressed as per your selected nickname instead of your real name everytime you receive an email from us."),t.qZA(),t.TgZ(18,"mat-form-field",21),t.TgZ(19,"mat-label"),t._uU(20,"Nickname"),t.qZA(),t._UZ(21,"input",22),t.TgZ(22,"button",23),t.NdJ("click",function(){return t.CHM(o),t.oxw().firstFormGroup.get("nickName").setValue("")}),t._UZ(23,"mat-icon",24),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25," Nickname should be 3 to 10 characters long. "),t.qZA(),t.qZA(),t.TgZ(26,"div",25),t.TgZ(27,"button",26),t.TgZ(28,"div"),t.YNc(29,U,2,0,"span",27),t.TgZ(30,"span",28),t._uU(31,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"mat-step",17),t.TgZ(33,"form",18),t.YNc(34,b,1,0,"ng-template",19),t.TgZ(35,"span",20),t.TgZ(36,"strong"),t._uU(37,"Note:"),t.qZA(),t._uU(38," You will use this password whenever you have an interaction with us. "),t.TgZ(39,"strong"),t._uU(40,"(e.g. score submission)"),t.qZA(),t.qZA(),t.TgZ(41,"mat-form-field",21),t.TgZ(42,"mat-label"),t._uU(43,"Password"),t.qZA(),t._UZ(44,"input",29,30),t.TgZ(46,"button",23),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(45);return r.type="password"===r.type?"text":"password"}),t.YNc(47,N,1,1,"mat-icon",31),t.YNc(48,F,1,1,"mat-icon",31),t.qZA(),t.TgZ(49,"mat-error"),t._uU(50," Password must be at least 4 characters. "),t.qZA(),t.qZA(),t.TgZ(51,"mat-form-field",32),t.TgZ(52,"mat-label"),t._uU(53,"Re-enter your Password"),t.qZA(),t._UZ(54,"input",33,34),t.TgZ(56,"button",23),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(55);return r.type="password"===r.type?"text":"password"}),t.YNc(57,J,1,1,"mat-icon",31),t.YNc(58,G,1,1,"mat-icon",31),t.qZA(),t.TgZ(59,"mat-error"),t._uU(60," Passwords do not match. "),t.qZA(),t.qZA(),t.TgZ(61,"div",25),t.TgZ(62,"button",35),t._uU(63,"Back"),t.qZA(),t.TgZ(64,"button",26),t.TgZ(65,"div"),t.YNc(66,S,2,0,"span",27),t.TgZ(67,"span",28),t._uU(68,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"mat-step",36),t.YNc(70,W,1,0,"ng-template",19),t.TgZ(71,"div",37),t.YNc(72,q,14,1,"ng-container",38),t.YNc(73,Q,8,1,"ng-container",38),t.qZA(),t.TgZ(74,"div",39),t.TgZ(75,"button",40),t._uU(76,"Back"),t.qZA(),t.TgZ(77,"button",41),t.NdJ("click",function(){return t.CHM(o),t.oxw().submitSetup()}),t.YNc(78,k,5,0,"div",38),t.YNc(79,M,1,2,"mat-progress-spinner",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.MAs(45),s=t.MAs(55),r=t.oxw();t.xp6(10),t.Q6J("linear",!0),t.xp6(1),t.Q6J("stepControl",r.firstFormGroup),t.xp6(1),t.Q6J("formGroup",r.firstFormGroup),t.xp6(11),t.Q6J("svgIcon","heroicons_solid:x-circle"),t.xp6(4),t.Q6J("color","primary")("disabled",!r.firstFormGroup.get("nickName").valid),t.xp6(2),t.Q6J("ngIf",r.firstFormGroup.get("nickName").valid),t.xp6(3),t.Q6J("stepControl",r.secondFormGroup),t.xp6(1),t.Q6J("formGroup",r.secondFormGroup),t.xp6(14),t.Q6J("ngIf","password"===o.type),t.xp6(1),t.Q6J("ngIf","text"===o.type),t.xp6(9),t.Q6J("ngIf","password"===s.type),t.xp6(1),t.Q6J("ngIf","text"===s.type),t.xp6(4),t.Q6J("color","warn"),t.xp6(2),t.Q6J("color","primary")("disabled",!r.secondFormGroup.get("password").valid||!r.secondFormGroup.get("confirmPassword").valid),t.xp6(2),t.Q6J("ngIf",r.secondFormGroup.get("password").valid&&r.secondFormGroup.get("confirmPassword").valid),t.xp6(6),t.Q6J("ngIf",!r.isSubmitting),t.xp6(1),t.Q6J("ngIf",r.isSubmitting),t.xp6(2),t.Q6J("color","warn")("disabled",r.isSubmitting),t.xp6(2),t.Q6J("color","primary")("disabled",r.isSubmitting),t.xp6(1),t.Q6J("ngIf",!r.isSubmitting),t.xp6(1),t.Q6J("ngIf",r.isSubmitting)}}let Y=(()=>{class e{constructor(o,s,r){this._activatedRoute=o,this._playerService=s,this._formBuilder=r,this.alert={type:"success",message:""},this.showAlert=!1,this.isLinear=!1,this.isSubmitting=!1,this.showStepper=!0}ngOnInit(){var o;this._activatedRoute.data.subscribe(s=>{var r,x;this._playerService.playerInfo=null===(r=null==s?void 0:s.PlayerData)||void 0===r?void 0:r.userInfo,this.playerData=null===(x=null==s?void 0:s.PlayerData)||void 0===x?void 0:x.userInfo}),this.firstFormGroup=this._formBuilder.group({nickName:[null===(o=this.playerData)||void 0===o?void 0:o.nickName,l.kI.compose([l.kI.required,l.kI.minLength(3),l.kI.maxLength(10)])]}),this.secondFormGroup=this._formBuilder.group({password:["",l.kI.compose([l.kI.required,l.kI.minLength(4)])],confirmPassword:["",l.kI.compose([l.kI.required,l.kI.minLength(4)])]}),this.secondFormGroup.get("password").valueChanges.subscribe(s=>{this.passwordChange()}),this.secondFormGroup.get("confirmPassword").valueChanges.subscribe(s=>{this.passwordChange()})}passwordChange(){var o=this.secondFormGroup.get("password").value,s=this.secondFormGroup.get("confirmPassword").value;this.secondFormGroup.controls.confirmPassword.setErrors(o!=s?{invalid:!0}:null)}submitSetup(){this.showAlert=!1,this.isSubmitting=!0,this.firstFormGroup.disable(),this.secondFormGroup.disable();var o={Nickname:this.firstFormGroup.get("nickName").value,Password:this.secondFormGroup.get("confirmPassword").value};this._playerService.updatePlayer(o).subscribe(()=>{this.isSubmitting=!1,this.showStepper=!1,this._playerService.accessToken=null},s=>{this.firstFormGroup.enable(),this.secondFormGroup.enable(),this.alert={type:"error",message:"An error occurred! Please try again."},this.showStepper=!0,this.showAlert=!0,this.isSubmitting=!1})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.gz),t.Y36(d.l),t.Y36(l.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-welcome-player"]],decls:6,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center","flex-auto","min-w-0"],[1,"flex","items-center","justify-end","w-full","sm:w-auto","py-4","px-4","p-4","rounded-2xl","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","p-2","sm:mx-0","h-150","max-h-150","max-w-120","w-100"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],["class","w-full h-150 max-h-150 flex flex-col items-center justify-center",4,"ngIf"],["class","w-full h-150 max-h-150",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"w-full","h-150","max-h-150","flex","flex-col","items-center","justify-center"],[1,"flex","flex-row","flex-auto","space-x-1","items-center","justify-center","mt-6","text-2xl","font-semibold","tracking-tight","leading-tight"],[1,"font-extrabold"],[1,"text-lg","font-semibold","mt-4","text-center"],[1,"icon-size-18","text-green-500","mt-2",3,"svgIcon"],[1,"text-md","font-semibold","mt-4","text-center"],[1,"w-full","h-150","max-h-150"],[1,"flex","flex-col","items-center","justify-center","mt-2","font-medium"],[1,"text-center"],["orientation","vertical",1,"w-full","bg-transparent",3,"linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"text-start","font-medium","text-md","break-words","whitespace-pre-line"],["appearance","fill",1,"w-full","mt-4"],["matInput","","placeholder","Nickname","formControlName","nickName","required","","autofocus",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-row","items-end","justify-end"],["mat-flat-button","","matStepperNext","",3,"color","disabled"],["class","absolute inline-flex animate-ping text-white",4,"ngIf"],[1,"relative","inline-flex","text-white"],["matInput","","formControlName","password","type","password","placeholder","Password","required",""],["pinField",""],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["appearance","fill",1,"w-full"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm your Password","required",""],["confirmPinField",""],["mat-button","","matStepperPrevious","",3,"color"],[1,"w-full"],[1,"relative","flex","flex-col","left-0","z-49","mt-2"],[4,"ngIf"],[1,"flex","flex-row","items-end","justify-end","mt-4"],["mat-button","","matStepperPrevious","",3,"color","disabled"],["mat-flat-button","",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"absolute","inline-flex","animate-ping","text-white"],[1,"text-start","font-semibold","text-lg"],[1,"text-start","font-medium","text-md","mt-2","break-words","whitespace-pre-line"],[1,"text-red-400","text-md"],[1,"text-blue-400","text-md"],[3,"diameter","mode"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,C,2,5,"fuse-alert",3),t.YNc(4,I,12,2,"div",4),t.YNc(5,E,80,25,"div",5),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Q6J("ngIf",s.showAlert),t.xp6(1),t.Q6J("ngIf",!s.showStepper),t.xp6(1),t.Q6J("ngIf",s.showStepper))},directives:[g.O5,h.W,y.Hw,u.Vq,u.C0,l._Y,l.JL,l.sg,u.VY,c.KE,c.hX,Z.Nt,l.Fj,l.JJ,l.u,l.Q7,a.lW,c.R9,c.TO,u.Ic,u.fd,m.Ou],encapsulation:2,data:{animation:v.b}}),e})();var D=n(7021),T=n(1086),O=n(7545);let _=(()=>{class e{constructor(o,s){this._playerService=o,this._router=s}_check(){return this._playerService.check().pipe((0,O.w)(o=>o?(0,T.of)(!0):(this._router.navigate(["sign-in"]),(0,T.of)(!1))))}canActivate(o,s){return this._check()}canActivateChild(o,s){return this._check()}canLoad(o,s){return this._check()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.l),t.LFG(p.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=n(2340),B=n(567),R=n(4850),j=n(520);let H=(()=>{class e{constructor(o){this._httpClient=o,this.apiHost=L.N.apiHost}resolve(o,s){return(0,B.D)([this._httpClient.get(`${this.apiHost}api/player`)]).pipe((0,R.U)(([r])=>({userInfo:r})))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(j.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var K=n(7775),z=n(1079),$=n(9832),V=n(2140),X=n(8966),tt=n(4834),et=n(2181),ot=n(5899),nt=n(2368),rt=n(7261),at=n(4466);const P=[{path:"",component:D.$,data:{layout:"empty"},children:[{path:"",loadChildren:()=>n.e(770).then(n.bind(n,8770)).then(e=>e.PlayerLandingModule)}]},{path:"",canActivate:[_],canActivateChild:[_],data:{layout:"empty"},children:[{path:"setup",data:{layout:"centered"},resolve:{PlayerData:H},component:Y}]}];let st=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,p.Bz.forChild(P),a.ot,$.vV,tt.t,y.Ps,et.Tx,ot.Cv,at.m,c.lN,X.Is,Z.c,nt.rP,V.Hi,z.Bb,m.Cq,rt.ZX,K.fC,u.T5]]}),e})()},6581:(A,f,n)=>{n.d(f,{l:()=>u});var g=n(2340),l=n(591),v=n(1737),t=n(1086),p=n(7221),d=n(7545),h=n(5e3),y=n(520);let u=(()=>{class c{constructor(a){this._httpClient=a,this.apiHost=g.N.apiHost,this._authenticated=!1,this._playerInfo=new l.X(null)}set accessToken(a){sessionStorage.removeItem("access_token"),sessionStorage.setItem("access_token",a)}get accessToken(){var a;return null!==(a=sessionStorage.getItem("access_token"))&&void 0!==a?a:""}get playerInfo$(){return this._playerInfo.asObservable()}set playerInfo(a){this._playerInfo.next(a)}verifyUserLanding(a){return this._httpClient.post(`${this.apiHost}api/player/setup`,a).pipe((0,p.K)(m=>(0,v._)(m)),(0,d.w)(m=>(this.accessToken=m.token,this._authenticated=!0,(0,t.of)(m))))}updatePlayer(a){return this._httpClient.put(`${this.apiHost}api/player`,a).pipe((0,p.K)(m=>(0,v._)(m)),(0,d.w)(m=>(0,t.of)(m)))}validateToken(){return this._httpClient.post(`${this.apiHost}api/player/validate-token`,{}).pipe((0,p.K)(()=>(0,t.of)(!1)),(0,d.w)(a=>(this._authenticated=null==a?void 0:a.valid,(0,t.of)(null==a?void 0:a.valid))))}check(){let a=(0,t.of)(!1);return this._authenticated&&(a=(0,t.of)(!0)),a=this.accessToken?this.validateToken():(0,t.of)(!1),a}}return c.\u0275fac=function(a){return new(a||c)(h.LFG(y.eN))},c.\u0275prov=h.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);