"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[592],{6581:(f,l,a)=>{a.d(l,{l:()=>c});var u=a(2340),h=a(591),o=a(1737),s=a(1086),n=a(7221),i=a(7545),_=a(5e3),p=a(520);let c=(()=>{class r{constructor(t){this._httpClient=t,this.apiHost=u.N.apiHost,this._authenticated=!1,this._playerInfo=new h.X(null)}set accessToken(t){sessionStorage.removeItem("access_token"),sessionStorage.setItem("access_token",t)}get accessToken(){var t;return null!==(t=sessionStorage.getItem("access_token"))&&void 0!==t?t:""}get playerInfo$(){return this._playerInfo.asObservable()}set playerInfo(t){this._playerInfo.next(t)}verifyUserLanding(t){return this._httpClient.post(`${this.apiHost}api/player/setup`,t).pipe((0,n.K)(e=>(0,o._)(e)),(0,i.w)(e=>(this.accessToken=e.token,this._authenticated=!0,(0,s.of)(e))))}verifyReportSubmission(t){return this._httpClient.post(`${this.apiHost}api/player/setup`,t).pipe((0,n.K)(e=>(0,o._)(e)),(0,i.w)(e=>(this.accessToken=e.token,this._authenticated=!0,(0,s.of)(e))))}updatePlayer(t){return this._httpClient.put(`${this.apiHost}api/player`,t).pipe((0,n.K)(e=>(0,o._)(e)),(0,i.w)(e=>(0,s.of)(e)))}validateToken(){return this._httpClient.post(`${this.apiHost}api/player/validate-token`,{}).pipe((0,n.K)(()=>(0,s.of)(!1)),(0,i.w)(t=>(this._authenticated=null==t?void 0:t.valid,(0,s.of)(null==t?void 0:t.valid))))}check(){let t=(0,s.of)(!1);return this._authenticated&&(t=(0,s.of)(!0)),t=this.accessToken?this.validateToken():(0,s.of)(!1),t}}return r.\u0275fac=function(t){return new(t||r)(_.LFG(p.eN))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);